const _0x3b75d7=_0xfebc;(function(_0x22ecbe,_0x284a27){const _0xbc7a75=_0xfebc,_0x18cbb5=_0x22ecbe();while(!![]){try{const _0x188834=parseInt(_0xbc7a75(0x13b))/0x1+parseInt(_0xbc7a75(0x14e))/0x2*(-parseInt(_0xbc7a75(0x143))/0x3)+-parseInt(_0xbc7a75(0x13f))/0x4+-parseInt(_0xbc7a75(0x14c))/0x5*(parseInt(_0xbc7a75(0x14b))/0x6)+-parseInt(_0xbc7a75(0x131))/0x7+parseInt(_0xbc7a75(0x12b))/0x8+parseInt(_0xbc7a75(0x129))/0x9*(parseInt(_0xbc7a75(0x12f))/0xa);if(_0x188834===_0x284a27)break;else _0x18cbb5['push'](_0x18cbb5['shift']());}catch(_0x421c14){_0x18cbb5['push'](_0x18cbb5['shift']());}}}(_0x220c,0xf3f54));function _0xfebc(_0x4b4fd4,_0x4a03e1){const _0x220c6f=_0x220c();return _0xfebc=function(_0xfebcca,_0x138051){_0xfebcca=_0xfebcca-0x129;let _0x511179=_0x220c6f[_0xfebcca];return _0x511179;},_0xfebc(_0x4b4fd4,_0x4a03e1);}const {check}=require(_0x3b75d7(0x144)),ApiError=require('../apiError'),validatorMiddleware=require(_0x3b75d7(0x13c)),SaleInvoiceModel=require('../../models/sale-model'),ProductModel=require('../../models/product-model'),StoreModel=require(_0x3b75d7(0x136));function _0x220c(){const _0x595783=['express-validator','custom','reject','proTaxRate','proCode','رقم\x20الفاتورة\x20مستخدم\x20من\x20قبل','الاصناف\x20مطلوبة','35412SQiMxR','1270KdVFZd','proTotalVat','2opEebl','products','رقم\x20الفاتورة\x20مطلوب','5527647VYEsVU','proCost','11169792CgnLoz','proTaxValue','proQuantity','proSale','70iMVCgM','مطلوب\x20جميع\x20المدخلات','11293618fkiGoR','كل\x20المدخلات\x20مطلوبة','Invalid\x20Invoice\x20Id\x20Format','then','\x20قم\x20بادخاله\x20اولا','../../models/store-model','withMessage','notEmpty','isMongoId','الكمية\x20المطلوبه\x20اكبر\x20من\x20الموجوده\x20بالمخزن','915582oLOkUb','../../middlewares/validator-middleware','invoiceNumber','findOne','2510200kJBrfK','لا\x20يوجد\x20صنف\x20بهذا\x20الكود:\x20','deleteInvoiceValidator','updateInvoiceValidator','5615409jZKeUJ'];_0x220c=function(){return _0x595783;};return _0x220c();}exports['addInvoiceValidator']=[check(_0x3b75d7(0x13d))[_0x3b75d7(0x138)]()[_0x3b75d7(0x137)](_0x3b75d7(0x150))[_0x3b75d7(0x145)](async _0x1ae750=>{const _0x1fbcc5=_0x3b75d7;await SaleInvoiceModel[_0x1fbcc5(0x13e)]({'invoiceNumber':_0x1ae750})[_0x1fbcc5(0x134)](_0x2402c4=>{const _0xac027=_0x1fbcc5;if(_0x2402c4)return Promise[_0xac027(0x146)](_0xac027(0x149));});}),check(_0x3b75d7(0x14f))[_0x3b75d7(0x138)]()['withMessage'](_0x3b75d7(0x14a))[_0x3b75d7(0x145)](async _0x365a22=>{const _0x3f573a=_0x3b75d7;for(var _0x377c78=0x0;_0x377c78<_0x365a22['length'];_0x377c78++){if(!_0x365a22[_0x377c78][_0x3f573a(0x148)]||!_0x365a22[_0x377c78][_0x3f573a(0x12d)]||!_0x365a22[_0x377c78][_0x3f573a(0x12a)]||!_0x365a22[_0x377c78][_0x3f573a(0x12e)]||!_0x365a22[_0x377c78][_0x3f573a(0x147)])throw new Error(_0x3f573a(0x132));await StoreModel[_0x3f573a(0x13e)]({'proCode':_0x365a22[_0x377c78][_0x3f573a(0x148)]})[_0x3f573a(0x134)](_0x3504ca=>{const _0x52b998=_0x3f573a;if(!_0x3504ca)return Promise[_0x52b998(0x146)](_0x52b998(0x140)+_0x365a22[_0x377c78]['proCode']+_0x52b998(0x135));else{if(_0x3504ca[_0x52b998(0x12d)]<_0x365a22[_0x377c78][_0x52b998(0x12d)])return Promise['reject'](_0x52b998(0x13a));}});}}),validatorMiddleware],exports['getInvoiceValidator']=[check('id')[_0x3b75d7(0x139)]()[_0x3b75d7(0x137)](_0x3b75d7(0x133)),validatorMiddleware],exports[_0x3b75d7(0x142)]=[check('id')[_0x3b75d7(0x139)]()[_0x3b75d7(0x137)](_0x3b75d7(0x133)),check(_0x3b75d7(0x13d))['notEmpty']()[_0x3b75d7(0x137)](_0x3b75d7(0x150)),check(_0x3b75d7(0x14f))['notEmpty']()[_0x3b75d7(0x137)](_0x3b75d7(0x14a))[_0x3b75d7(0x145)](async _0x4f251f=>{const _0x3813d2=_0x3b75d7;for(var _0x47c326=0x0;_0x47c326<_0x4f251f['length'];_0x47c326++){if(!_0x4f251f[_0x47c326]['proQuantity']||!_0x4f251f[_0x47c326][_0x3813d2(0x12a)]||!_0x4f251f[_0x47c326][_0x3813d2(0x12e)]||!_0x4f251f[_0x47c326][_0x3813d2(0x147)]||!_0x4f251f[_0x47c326][_0x3813d2(0x12c)]||!_0x4f251f[_0x47c326][_0x3813d2(0x14d)])throw new Error(_0x3813d2(0x130));await ProductModel['findOne']({'proCode':_0x4f251f[_0x47c326][_0x3813d2(0x148)]})[_0x3813d2(0x134)](_0x2f181b=>{const _0xe0986b=_0x3813d2;if(!_0x2f181b)return Promise[_0xe0986b(0x146)](_0xe0986b(0x140)+_0x4f251f[_0x47c326][_0xe0986b(0x148)]+'\x20قم\x20بادخاله\x20اولا');});}}),validatorMiddleware],exports[_0x3b75d7(0x141)]=[check('id')['isMongoId']()[_0x3b75d7(0x137)](_0x3b75d7(0x133)),validatorMiddleware];